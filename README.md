# Melody 🎵

> A programming teamwork in ZJU

## 游戏简介

**Melody** 者，基于 **Pygame** 开发之音游也。

设四轨于屏，音随曲起，符自上而下坠；玩家执键 A / S / K / L，俟符临判线而击之，期与拍合，则中。

其旨在使人闻声知节，按之得趣。

---

## 项目亮点

* **完整的多场景流程**：主菜单 → 选曲 → 游戏 → 暂停 → 设置/校准，体验闭环清晰。
* **四轨按键玩法**：A / S / K / L 对应四条轨道，节奏紧凑，学习成本低，上手即打。
* **延迟校准**：考虑不同设备音频/输入延迟差异，通过跟拍校准提升判定准确度。
* **暂停回拍机制**：暂停返回时先播放 **8 声节拍器**，帮助重新找回节拍，避免“回来就掉链子”。
* **可维护的模块化组织**：按界面/功能拆分文件，逻辑职责清晰，便于课程作业展示与二次迭代。

---

## 操作指南

### 主菜单

* ↑ / ↓：切换菜单项
* Enter：确认

### 选曲界面

* ↑ / ↓：选择曲目
* Enter：开始游戏

### 游戏内

* **A / S / K / L**：四轨道击打
* **Esc**：暂停（进入暂停界面）

### 暂停界面

* ↑ / ↓：选择功能
* ← / →：调节 **音量 / 本地偏移**
* Enter：继续 / 重开 / 退出
* Esc：继续（返回游戏）

从暂停返回游戏时，会根据**当前节拍**先播放 **8 声节拍器**，再继续游戏。

### 设置界面

* **Master Volume**：主音量（左右调整）
* **Latency Calibration**：延迟校准（按提示跟节拍）

进入校准后先播放 **4 声节拍器**，随后音符开始下落并可按提示点击校准。

---

## 文件结构

* `main.py`：主流程与场景切换
* `main_interface.py`：主界面
* `song_selection.py`：选曲逻辑
* `setting.py`：设置与延迟校准
* `pause_interface.py`：暂停界面
* `play_interface_version2_final_version.py`：游戏主逻辑
**Tip**：修改流速请在`play_interface_version2_final_version.py`中搜索fall_speed自行更改
